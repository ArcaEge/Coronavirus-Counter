{% extends 'base.html' %}
{% block head %}
<title>Coronavirus Counter - Countries</title>
<script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
{% endblock %}
{% block body %}
<!-- HTML -->
<h1 style="padding-top: 70px" class="container align-center" id="top">Countries</h1>
<div class="container" style="padding-top: 30px">
  <div class="input-group">
  <div class="input-group-prepend">
    <span class="input-group-text"><i class="material-icons">search</i></span>
  </div>
  <input class="form-control" id="myInput" type="text" placeholder="Search"></div>
  <table class="table table-responsive-sm sortable" style="margin-top: 20px">
    <thead>
      <tr>
          <th>Country</th>
          <th>Cases</th>
          <th>Recovered</th>
          <th>Deaths</th>
      </tr>
    </thead>
    <tbody id="myTable">
      {% for i in a %}
      <tr id="{{ i.country }}">
        <td><a href="/countries/{{i.country}}" class="btn btn-link" style="text-align: left;"><img src="{{i.countryInfo.flag}}" width="40" class="img-responsive float-left" style="margin-right: 5px"> {{ i.country }}</a></td>
        <td>{{ '{:,}'.format(i.cases) }}</td>
        <td>{{ '{:,}'.format(i.recovered) }}</td>
        <td>{{ '{:,}'.format(i.deaths) }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<a href="#top" id="myBtn" title="Back to top" class="btn btn-danger"><i class="material-icons" style="font-size: 30px">expand_less</i></a>
<style media="screen">
#myBtn {
display: none;
position: fixed;
bottom: 20px;
right: 30px;
z-index: 99;
}
</style>
<script type="text/javascript">
mybutton = document.getElementById("myBtn");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
if (document.body.scrollTop > 120 || document.documentElement.scrollTop > 120) {
  mybutton.style.display = "block";
} else {
  mybutton.style.display = "none";
}
}
</script>
<script>
$(document).ready(function(){
  // Add smooth scrolling to all links
  $("a").on('click', function(event) {

    // Make sure this.hash has a value before overriding default behavior
    if (this.hash !== "") {
      // Prevent default anchor click behavior
      event.preventDefault();

      // Store hash
      var hash = this.hash;

      // Using jQuery's animate() method to add smooth page scroll
      // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
      $('html, body').animate({
        scrollTop: $(hash).offset().top
      }, 500, function(){

        // Add hash (#) to URL when done scrolling (default click behavior)
        window.location.hash = hash;
      });
    } // End if
  });
});
</script>
<script>
  $(document).ready(function(){
    $("#myInput").on("keyup", function() {
      var value = $(this).val().toLowerCase();
      $("#myTable tr").filter(function() {
        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
      });
    });
  });
</script>
{% endblock %}
